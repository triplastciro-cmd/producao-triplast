<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triplast 2.0 | Monitoramento Inteligente</title>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        brand: { 50: '#eff6ff', 100: '#dbeafe', 500: '#3b82f6', 600: '#2563eb', 900: '#1e3a8a' },
                        dark: { 800: '#1e293b', 900: '#0f172a' }
                    }
                }
            }
        }
    </script>

    <style>
        /* Estilos Customizados & Anima√ß√µes */
        body { background-color: #f3f4f6; overflow: hidden; }
        
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        /* Sidebar Ativa */
        .nav-item.active {
            background: linear-gradient(90deg, #eff6ff 0%, #ffffff 100%);
            border-left: 4px solid #2563eb;
            color: #1e40af;
        }

        /* Status M√°quina */
        .maquina-card { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .maquina-card:hover { transform: translateY(-4px); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1); }
        
        .status-produzindo { border-top: 4px solid #22c55e; }
        .status-parada { border-top: 4px solid #ef4444; }
        .status-setup { border-top: 4px solid #f59e0b; }
        .status-offline { border-top: 4px solid #94a3b8; opacity: 0.8; }

        /* Loader */
        .loader {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #c1c1c1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #a8a8a8; }
    </style>
</head>
<body class="text-slate-600 antialiased h-screen flex">

    <aside class="w-64 bg-white border-r border-slate-200 flex flex-col justify-between shadow-lg z-20 hidden md:flex">
        <div>
            <div class="p-6 flex items-center gap-3">
                <div class="w-10 h-10 bg-brand-600 rounded-lg flex items-center justify-center text-white font-black text-xl shadow-brand-500/50 shadow-lg">T</div>
                <div>
                    <h1 class="font-bold text-slate-800 text-lg leading-tight">Triplast <span class="text-brand-600">2.0</span></h1>
                    <p class="text-[10px] text-slate-400 font-semibold tracking-wider uppercase">Monitoramento</p>
                </div>
            </div>

            <nav class="mt-6 px-4 space-y-2">
                <button onclick="nav('painel')" id="nav-painel" class="nav-item active w-full flex items-center gap-3 px-4 py-3 text-sm font-bold text-slate-500 rounded-r-full hover:bg-slate-50 transition-all">
                    <i class="fa-solid fa-grid-2 text-lg w-6"></i> Vis√£o Geral
                </button>
                <button onclick="nav('producao')" id="nav-producao" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-bold text-slate-500 rounded-r-full hover:bg-slate-50 transition-all">
                    <i class="fa-solid fa-clipboard-list text-lg w-6"></i> Ordens (O.P)
                </button>
                <button onclick="nav('graficos')" id="nav-graficos" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-bold text-slate-500 rounded-r-full hover:bg-slate-50 transition-all">
                    <i class="fa-solid fa-chart-pie text-lg w-6"></i> Indicadores
                </button>
                <button onclick="nav('config')" id="nav-config" class="nav-item w-full flex items-center gap-3 px-4 py-3 text-sm font-bold text-slate-500 rounded-r-full hover:bg-slate-50 transition-all">
                    <i class="fa-solid fa-sliders text-lg w-6"></i> Ajustes
                </button>
            </nav>
        </div>

        <div class="p-4 border-t border-slate-100 bg-slate-50">
            <div class="flex items-center justify-between mb-2">
                <span class="text-[10px] font-bold text-slate-400 uppercase">Status do Sistema</span>
                <span id="sync-status" class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
            </div>
            <p class="text-[10px] text-slate-400">√öltima sync: <span id="last-sync-time">Agora</span></p>
        </div>
    </aside>

    <main class="flex-1 flex flex-col h-screen overflow-hidden relative">
        
        <header class="h-16 bg-white border-b border-slate-200 flex items-center justify-between px-6 shadow-sm z-10">
            <div class="flex items-center gap-4">
                <button class="md:hidden text-slate-500 text-xl"><i class="fa-solid fa-bars"></i></button>
                <h2 id="page-title" class="font-bold text-xl text-slate-800">Painel de Controle</h2>
            </div>

            <div class="flex items-center gap-4">
                <div class="hidden md:flex bg-slate-100 rounded-lg p-1">
                    <select id="turno-atual" onchange="mudarTurno()" class="bg-transparent text-xs font-bold text-slate-600 outline-none px-2 py-1">
                        <option value="1">üåÖ Manh√£</option>
                        <option value="2">‚òÄÔ∏è Tarde</option>
                        <option value="3">üåô Noite</option>
                    </select>
                </div>

                <button onclick="togglePause()" id="btn-pause" class="w-8 h-8 rounded-full bg-yellow-100 text-yellow-600 hover:bg-yellow-200 flex items-center justify-center transition-colors" title="Pausar Produ√ß√£o">
                    <i class="fa-solid fa-pause text-xs"></i>
                </button>
                
                <div class="h-8 w-[1px] bg-slate-200 mx-1"></div>

                <div class="text-right">
                    <p class="text-[10px] font-bold text-slate-400 uppercase">Efici√™ncia Global</p>
                    <p id="header-oee" class="text-sm font-black text-brand-600 leading-none">0%</p>
                </div>
            </div>
        </header>

        <div class="flex-1 overflow-y-auto bg-slate-50 p-6 relative" id="main-content">
            
            <div id="view-painel" class="view-section animate-fade-in space-y-6">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                        <span class="text-xs font-bold text-slate-400 uppercase">M√°quinas Ativas</span>
                        <h3 class="text-2xl font-black text-slate-800 mt-1" id="stat-maquinas-ativas">0/0</h3>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                        <span class="text-xs font-bold text-slate-400 uppercase">Produ√ß√£o Hoje</span>
                        <h3 class="text-2xl font-black text-blue-600 mt-1" id="stat-producao-total">0 un</h3>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                        <span class="text-xs font-bold text-slate-400 uppercase">Meta Turno</span>
                        <h3 class="text-2xl font-black text-slate-800 mt-1" id="stat-meta-turno">0%</h3>
                        <div class="w-full h-1 bg-slate-100 mt-2 rounded-full overflow-hidden"><div id="bar-meta" class="h-full bg-blue-500 w-0"></div></div>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                        <span class="text-xs font-bold text-slate-400 uppercase">Tempo Parado</span>
                        <h3 class="text-2xl font-black text-red-500 mt-1" id="stat-paradas">0min</h3>
                    </div>
                </div>

                <div id="grid-maquinas" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                    </div>
            </div>

            <div id="view-producao" class="view-section hidden max-w-4xl mx-auto">
                <div class="bg-white rounded-2xl shadow-lg border border-slate-100 overflow-hidden">
                    <div class="bg-slate-50 px-6 py-4 border-b border-slate-100 flex justify-between items-center">
                        <h3 class="font-bold text-slate-700">Nova Ordem de Produ√ß√£o</h3>
                        <span class="bg-blue-100 text-blue-700 text-xs font-bold px-2 py-1 rounded">Passo 1/1</span>
                    </div>
                    
                    <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <div>
                                <label class="label-input">M√°quina</label>
                                <select id="form-maq" class="input-modern"></select>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="label-input">N¬∫ O.P</label>
                                    <input type="text" id="form-op" class="input-modern" placeholder="0000">
                                </div>
                                <div>
                                    <label class="label-input">Meta (Qtd)</label>
                                    <input type="number" id="form-meta" class="input-modern" placeholder="0">
                                </div>
                            </div>
                            <div>
                                <label class="label-input">Cliente</label>
                                <input type="text" id="form-cliente" class="input-modern" placeholder="Nome do Cliente">
                            </div>
                        </div>

                        <div class="space-y-4">
                            <div>
                                <label class="label-input">Produto</label>
                                <select id="form-produto" class="input-modern bg-white">
                                    <option value="">Selecione...</option>
                                </select>
                            </div>
                            
                            <div class="bg-slate-50 p-4 rounded-xl border border-slate-100 space-y-3">
                                <p class="text-[10px] font-black uppercase text-slate-400">Detalhes T√©cnicos</p>
                                <div class="grid grid-cols-2 gap-3">
                                    <input type="text" id="form-material" placeholder="Material" class="input-small">
                                    <input type="text" id="form-pigmento" placeholder="Pigmento" class="input-small">
                                </div>
                                <select id="form-operador" class="input-small w-full"></select>
                            </div>
                        </div>
                    </div>

                    <div class="px-6 py-4 bg-slate-50 border-t border-slate-100 flex justify-end">
                        <button onclick="lancarOrdem()" class="bg-brand-600 hover:bg-brand-500 text-white font-bold py-3 px-8 rounded-xl shadow-lg shadow-blue-500/30 transition-all transform active:scale-95 flex items-center gap-2">
                            <i class="fa-solid fa-rocket"></i> Lan√ßar Produ√ß√£o
                        </button>
                    </div>
                </div>

                <div class="mt-8">
                    <h3 class="font-bold text-slate-700 mb-4">√öltimos Lan√ßamentos</h3>
                    <div id="lista-ops-recente" class="space-y-2"></div>
                </div>
            </div>

            <div id="view-graficos" class="view-section hidden">
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 h-96">
                    <canvas id="mainChart"></canvas>
                </div>
            </div>

            <div id="view-config" class="view-section hidden max-w-3xl mx-auto">
                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 divide-y divide-slate-100">
                    <div class="p-6">
                        <h3 class="font-bold text-lg text-slate-800 mb-4">üë®‚Äçüîß Operadores</h3>
                        <div class="flex gap-2 mb-4">
                            <input type="text" id="novo-op-nome" class="input-modern" placeholder="Nome do Operador">
                            <button onclick="addOperador()" class="btn-secondary">Adicionar</button>
                        </div>
                        <div id="tags-operadores" class="flex flex-wrap gap-2"></div>
                    </div>

                    <div class="p-6">
                        <h3 class="font-bold text-lg text-slate-800 mb-4">üì¶ Produtos</h3>
                        <div class="flex gap-2 mb-4">
                            <input type="text" id="novo-prod-nome" class="input-modern" placeholder="Nome do Produto">
                            <button onclick="addProduto()" class="btn-secondary">Adicionar</button>
                        </div>
                        <div id="tags-produtos" class="flex flex-wrap gap-2"></div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <div id="toast" class="fixed bottom-6 right-6 bg-slate-800 text-white px-6 py-4 rounded-xl shadow-2xl flex items-center gap-4 transform translate-y-40 transition-transform duration-300 z-50">
        <i class="fa-solid fa-circle-check text-green-400"></i>
        <div>
            <h4 class="font-bold text-sm">Sucesso</h4>
            <p id="toast-msg" class="text-xs text-slate-400">Dados salvos com sucesso.</p>
        </div>
    </div>

    <script>
        // ==========================================
        // 1. CONFIGURA√á√ÉO & ESTADO
        // ==========================================
        
        // ‚ö†Ô∏è COLOQUE SUAS CHAVES AQUI
        const SUPABASE_URL = 'SUA_URL_SUPABASE_AQUI'; 
        const SUPABASE_KEY = 'SUA_CHAVE_ANON_AQUI'; // Use a ANON KEY, n√£o a Service Role!
        
        const sb = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        // Estado Global (Store)
        let store = {
            maquinas: Array(10).fill(null).map((_, i) => ({ 
                id: i+1, nome: `Injetora ${i+1}`, status: 'parada', op_atual: null, eficiencia: 0 
            })),
            config: { operadores: [], produtos: [], cores: [] },
            lastUpdate: 0
        };

        // ==========================================
        // 2. L√ìGICA DE DADOS (CORE)
        // ==========================================

        async function init() {
            renderLoader(true);
            await carregarDados();
            setInterval(salvarAutomatico, 60000); // Auto-save 1min
            renderUI();
            renderLoader(false);
        }

        async function carregarDados() {
            try {
                const { data, error } = await sb.from('sistema').select('*').eq('id', 1).single();
                if (error) throw error;
                if (data && data.conteudo) {
                    // Merge seguro dos dados
                    store = { ...store, ...data.conteudo };
                    console.log("Dados carregados:", store);
                    atualizarTela();
                }
            } catch (e) {
                console.error("Erro ao carregar:", e);
                showToast("Erro ao conectar no servidor", true);
            }
        }

        // SEGURAN√áA: Optimistic Locking (Verifica se algu√©m salvou antes)
        async function salvarDados(force = false) {
            document.getElementById('sync-status').classList.replace('bg-green-500', 'bg-yellow-500');
            
            try {
                // 1. Verificar timestamp no servidor antes de gravar
                if (!force) {
                    const { data: serverData } = await sb.from('sistema').select('conteudo').eq('id', 1).single();
                    if (serverData && serverData.conteudo.lastUpdate > store.lastUpdate) {
                        if(!confirm("‚ö†Ô∏è ATEN√á√ÉO: Algu√©m modificou os dados recentemente.\nSobrescrever pode causar perda de dados de outros usu√°rios.\nDeseja recarregar os dados novos (Recomendado)?")) {
                            // Se o usu√°rio insistir em salvar por cima:
                            store.lastUpdate = Date.now();
                        } else {
                            // Recarrega e cancela o save atual
                            store = serverData.conteudo;
                            atualizarTela();
                            return;
                        }
                    }
                }

                store.lastUpdate = Date.now();
                
                const { error } = await sb.from('sistema').update({
                    conteudo: store
                }).eq('id', 1);

                if (error) throw error;
                
                showToast("Dados sincronizados");
                document.getElementById('last-sync-time').innerText = new Date().toLocaleTimeString();
                document.getElementById('sync-status').classList.replace('bg-yellow-500', 'bg-green-500');

            } catch (e) {
                console.error(e);
                showToast("Falha ao salvar!", true);
                document.getElementById('sync-status').classList.replace('bg-yellow-500', 'bg-red-500');
            }
        }

        function salvarAutomatico() {
            salvarDados();
        }

        // ==========================================
        // 3. INTERFACE (UI) & RENDERIZA√á√ÉO
        // ==========================================

        function nav(tela) {
            // Remove active class
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            
            // Activate
            document.getElementById(`nav-${tela}`).classList.add('active');
            document.getElementById(`view-${tela}`).classList.remove('hidden');
            
            // Titles
            const titles = { 'painel': 'Vis√£o Geral', 'producao': 'Gest√£o de O.P', 'graficos': 'Indicadores', 'config': 'Configura√ß√µes' };
            document.getElementById('page-title').innerText = titles[tela];

            // Render specific
            if(tela === 'painel') renderMaquinas();
            if(tela === 'config') renderConfigTags();
            if(tela === 'producao') renderFormSelects();
        }

        function renderMaquinas() {
            const grid = document.getElementById('grid-maquinas');
            grid.innerHTML = '';

            let ativas = 0;

            store.maquinas.forEach(m => {
                if(m.status === 'produzindo') ativas++;
                
                const statusColor = m.status === 'produzindo' ? 'text-green-600' : 'text-slate-400';
                const borderClass = `status-${m.status || 'offline'}`;
                
                const card = document.createElement('div');
                card.className = `maquina-card bg-white rounded-xl shadow-sm p-5 border border-slate-100 ${borderClass}`;
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <span class="text-xs font-bold text-slate-400 uppercase tracking-wider">M√°quina</span>
                            <h4 class="font-black text-xl text-slate-700">#${m.id}</h4>
                        </div>
                        <div class="w-8 h-8 rounded-full bg-slate-50 flex items-center justify-center cursor-pointer hover:bg-slate-200" onclick="editarMaquina(${m.id})">
                            <i class="fa-solid fa-ellipsis-vertical text-slate-400"></i>
                        </div>
                    </div>
                    
                    ${m.op_atual ? `
                    <div class="bg-blue-50 rounded-lg p-3 mb-4">
                        <div class="flex justify-between mb-1">
                            <span class="text-[10px] font-bold text-blue-600">O.P ${m.op_atual.numero}</span>
                            <span class="text-[10px] font-bold text-slate-500">${m.op_atual.cliente}</span>
                        </div>
                        <p class="font-bold text-sm text-slate-800 truncate">${m.op_atual.produto}</p>
                        <div class="w-full bg-blue-200 h-1.5 rounded-full mt-2 overflow-hidden">
                            <div class="bg-blue-600 h-full" style="width: ${calculaProgresso(m)}%"></div>
                        </div>
                    </div>
                    ` : `
                    <div class="bg-slate-50 rounded-lg p-3 mb-4 text-center border border-dashed border-slate-300">
                        <span class="text-xs font-bold text-slate-400">Sem Programa√ß√£o</span>
                    </div>
                    `}

                    <div class="flex items-center justify-between mt-2 pt-2 border-t border-slate-50">
                        <div class="flex flex-col">
                            <span class="text-[10px] uppercase font-bold text-slate-400">Operador</span>
                            <span class="text-xs font-bold text-slate-600">${m.op_atual ? m.op_atual.operador : '--'}</span>
                        </div>
                         <div class="flex flex-col text-right">
                            <span class="text-[10px] uppercase font-bold text-slate-400">Status</span>
                            <span class="text-xs font-black uppercase ${statusColor}">${m.status || 'Offline'}</span>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });

            document.getElementById('stat-maquinas-ativas').innerText = `${ativas}/${store.maquinas.length}`;
        }

        function renderConfigTags() {
            const divOps = document.getElementById('tags-operadores');
            divOps.innerHTML = store.config.operadores.map(op => 
                `<span class="bg-slate-100 text-slate-600 px-3 py-1 rounded-full text-xs font-bold border border-slate-200 flex items-center gap-2">
                    ${op} <button onclick="removeConfig('operadores', '${op}')" class="text-red-400 hover:text-red-600">&times;</button>
                </span>`
            ).join('');

            const divProds = document.getElementById('tags-produtos');
            divProds.innerHTML = store.config.produtos.map(p => 
                `<span class="bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-xs font-bold border border-blue-100 flex items-center gap-2">
                    ${p} <button onclick="removeConfig('produtos', '${p}')" class="text-red-400 hover:text-red-600">&times;</button>
                </span>`
            ).join('');
        }

        function renderFormSelects() {
            const selMaq = document.getElementById('form-maq');
            selMaq.innerHTML = store.maquinas.map(m => `<option value="${m.id}">${m.nome}</option>`).join('');

            const selOp = document.getElementById('form-operador');
            selOp.innerHTML = '<option value="">Operador...</option>' + store.config.operadores.map(op => `<option value="${op}">${op}</option>`).join('');
            
            const selProd = document.getElementById('form-produto');
            selProd.innerHTML = '<option value="">Selecione...</option>' + store.config.produtos.map(p => `<option value="${p}">${p}</option>`).join('');
        }

        // ==========================================
        // 4. A√á√ïES (HANDLERS)
        // ==========================================

        function lancarOrdem() {
            const maqId = document.getElementById('form-maq').value;
            const opData = {
                numero: document.getElementById('form-op').value,
                cliente: document.getElementById('form-cliente').value,
                produto: document.getElementById('form-produto').value,
                meta: document.getElementById('form-meta').value,
                operador: document.getElementById('form-operador').value,
                inicio: Date.now()
            };

            if(!opData.numero || !opData.produto) return showToast("Preencha os dados obrigat√≥rios", true);

            const maqIndex = store.maquinas.findIndex(m => m.id == maqId);
            if(maqIndex >= 0) {
                store.maquinas[maqIndex].op_atual = opData;
                store.maquinas[maqIndex].status = 'produzindo';
                salvarDados();
                showToast(`O.P ${opData.numero} iniciada na Maq ${maqId}`);
                nav('painel');
            }
        }

        function addOperador() {
            const nome = document.getElementById('novo-op-nome').value;
            if(nome) {
                store.config.operadores.push(nome);
                document.getElementById('novo-op-nome').value = '';
                salvarDados();
                renderConfigTags();
            }
        }

        function addProduto() {
            const nome = document.getElementById('novo-prod-nome').value;
            if(nome) {
                store.config.produtos.push(nome);
                document.getElementById('novo-prod-nome').value = '';
                salvarDados();
                renderConfigTags();
            }
        }

        function removeConfig(tipo, valor) {
            store.config[tipo] = store.config[tipo].filter(i => i !== valor);
            salvarDados();
            renderConfigTags();
        }

        function mudarTurno() {
            // L√≥gica para mudar turno (apenas visual por enquanto)
            showToast("Turno alterado");
        }

        function togglePause() {
            // Exemplo de l√≥gica global
            const novoStatus = store.statusGlobal === 'pausado' ? 'ativo' : 'pausado';
            store.statusGlobal = novoStatus;
            showToast(`Produ√ß√£o ${novoStatus === 'pausado' ? 'Pausada' : 'Retomada'}`);
        }

        // Utilit√°rios
        function calculaProgresso(m) {
            // Simula√ß√£o: Progresso baseado em tempo ou qtd
            return 50; 
        }

        function showToast(msg, isError = false) {
            const t = document.getElementById('toast');
            const icon = t.querySelector('i');
            
            document.getElementById('toast-msg').innerText = msg;
            t.className = `fixed bottom-6 right-6 px-6 py-4 rounded-xl shadow-2xl flex items-center gap-4 transition-transform duration-300 z-50 ${isError ? 'bg-red-500 text-white' : 'bg-slate-800 text-white'}`;
            icon.className = isError ? 'fa-solid fa-triangle-exclamation' : 'fa-solid fa-circle-check text-green-400';
            
            t.style.transform = "translateY(0)";
            setTimeout(() => t.style.transform = "translateY(150px)", 3000);
        }

        function atualizarTela() {
            // Re-renderiza a tela ativa
            const telaAtiva = document.querySelector('.nav-item.active').id.replace('nav-', '');
            nav(telaAtiva);
        }

        function renderLoader(show) {
            // Opcional: Implementar overlay de loading
        }

        // Inicializar
        window.addEventListener('DOMContentLoaded', () => {
            init();
            nav('painel'); // Tela inicial
        });

    </script>

    <style>
        /* CSS Utilit√°rio Extra */
        .input-modern {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            background-color: #f8fafc;
            font-weight: 600;
            color: #334155;
            outline: none;
            transition: all 0.2s;
        }
        .input-modern:focus { border-color: #3b82f6; background: white; box-shadow: 0 0 0 3px rgba(59,130,246,0.1); }
        
        .input-small {
            width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #e2e8f0; font-size: 12px;
        }

        .label-input {
            display: block; font-size: 10px; font-weight: 800; color: #94a3b8; text-transform: uppercase; margin-bottom: 4px;
        }

        .btn-secondary {
            background: #e2e8f0; color: #475569; font-weight: 700; padding: 0 16px; border-radius: 8px; font-size: 12px; transition: 0.2s;
        }
        .btn-secondary:hover { background: #cbd5e1; }
    </style>
</body>
</html>
